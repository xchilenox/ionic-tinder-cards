!function(t){function n(t,n){function i(i,e){return function(i,e,s,o){var a=e[0],c=a.querySelector(".no"),l=a.querySelector(".yes");a.style.transform=a.style.webkitTransform="translate3d(0px, 0px, 0px)";var u=new p({el:a,$q:n,$scope:i,leftText:c,rightText:l,onPartialSwipe:function(n){o.partial(n);var e=this;t(function(){0>n?(e.leftText&&(e.leftText.style.opacity=r(-n)),e.rightText&&(e.rightText.style.opacity=0)):(e.leftText&&(e.leftText.style.opacity=0),e.rightText&&(e.rightText.style.opacity=r(n))),i.onPartialSwipe({amt:n})})},onSwipeRight:function(){t(function(){i.onSwipeRight()})},onSwipeLeft:function(){t(function(){i.onSwipeLeft()})},onTransitionRight:function(){t(function(){i.onTransitionRight()})},onTransitionLeft:function(){t(function(){i.onTransitionLeft()})},onTransitionOut:function(n){0>n?u.onTransitionLeft():u.onTransitionRight(),t(function(){i.onTransitionOut({amt:n})})},onDestroy:function(){t(function(){i.onDestroy()})},onSnapBack:function(n,e,r){var s=a.querySelector(".yes"),o=a.querySelector(".no");collide.animation({duration:500,percent:0,reverse:!1}).easing({type:"spring",frequency:15,friction:250,initialForce:!1}).on("step",function(t){a.style.transform=a.style.webkitTransform="translate3d("+(n-n*t)+"px, "+(e-e*t)+"px, 0) rotate("+(r-r*t)+"rad)",o&&(o.style.opacity=0),s&&(s.style.opacity=0)}).start();t(function(){i.onSnapBack()})}});i.$parent.swipeCard=u,o.registerCard(u),i.$on("$destroy",function(){o.unregisterCard(u)})}}var e={restrict:"E",template:'<div class="td-card" ng-transclude></div>',require:"^tdCards",transclude:!0,compile:i,scope:{onSwipeLeft:"&",onSwipeRight:"&",onTransitionLeft:"&",onTransitionRight:"&",onTransitionOut:"&",onPartialSwipe:"&",onSnapBack:"&",onDestroy:"&"}},r=function(t){t=Math.min(1,3*t);var n=.11,i=.67,e=.41,r=.99;return Math.pow(1-t,3)*n+3*Math.pow(1-t,2)*t*i+3*(1-t)*t*t*e+Math.pow(t,3)*r};return e}function i(t,n){function i(t,i,e,r){r._register(e.delegateHandle,this),t.$on("$destroy",function(){r._unregister(e.delegateHandle)});var s,o,a,c,l,u,h,d=function(){for(l=i[0].querySelectorAll("td-card"),h=0;h<l.length;h++)u=l[h],u&&(h>0&&3>h&&(u.style.transform=u.style.webkitTransform="translate3d(0, "+4*h+"px, 0)"),u.style.zIndex=l.length-h)};n(function(){d()});var f=function(t,n,i){var e,r;e=t.style.transform||t.style.webkitTransform,r=Math.max(0,Math.min(i,i-i*Math.abs(n))),t.style.transform=t.style.webkitTransform="translate3d(0, "+r+"px, 0)"};this.cardInstances=[],this.getFirstCard=function(){return this.cardInstances[0]},this.registerCard=function(t){this.cardInstances.push(t)},this.unregisterCard=function(t){var n=this.cardInstances.indexOf(t);n>=0&&this.cardInstances.splice(n,1)},this.partial=function(t){s=i[0].querySelectorAll("td-card"),o=s[0],a=s.length>2&&s[1],c=s.length>3&&s[2],a&&f(a,t,4),c&&f(c,t,8)}}var e={restrict:"E",template:'<div class="td-cards" ng-transclude></div>',transclude:!0,controller:i,scope:{}};return i.$inject=["$scope","$element","$attrs","TDCardDelegate"],e}function e(){var t={restrict:"E",template:'<div class="td-pulse" ng-transclude></div>',transclude:!0,scope:{}};return t}function r(){var t={restrict:"E",template:'<div class="td-buttons" ng-transclude></div>',transclude:!0,scope:{}};return t}function s(){var t={restrict:"E",template:'<div class="td-button"><button class="button button-clear {{action}}"><i class="icon {{icon}}"></i></button></div>',transclude:!1,scope:{action:"@action",icon:"@icon"}};return t}function o(t){function n(n,i){t.$emit("tdCard.pop",i)}function i(t){return t.swipeCard}function e(t){return a[t]||null}function r(t,n){a[t]=n}function s(t){delete a[t]}var o={popCard:n,getSwipeableCard:i,$getByHandle:e,_register:r,_unregister:s},a={};return o}for(var a=document.createElement("div"),c=["webkitTransformOrigin","transform-origin","-webkit-transform-origin","webkit-transform-origin","-moz-transform-origin","moz-transform-origin","MozTransformOrigin","mozTransformOrigin"],l=["webkitTransition","transition","-webkit-transition","webkit-transition","-moz-transition","moz-transition","MozTransition","mozTransition"],u="webkitTransformOrigin",h="webkitTransition",d=0;d<c.length;d++)if(void 0!==a.style[c[d]]){u=c[d];break}for(var f=0;f<l.length;f++)if(void 0!==a.style[l[f]]){h=l[f];break}var p=t.views.View.inherit({initialize:function(n){n=t.extend({},n),t.extend(this,n),this.$q=n.$q,this.el=n.el,this.parentWidth=this.el.parentNode.offsetWidth,this.width=this.el.offsetWidth,this.startX=this.startY=this.x=this.y=0,this.bindEvents()},setX:function(n){this.el.style[t.CSS.TRANSFORM]="translate3d("+n+"px,"+this.y+"px, 0)",this.x=n,this.startX=n},setY:function(n){this.el.style[t.CSS.TRANSFORM]="translate3d("+this.x+"px,"+n+"px, 0)",this.y=n,this.startY=n},setZIndex:function(t){this.el.style.zIndex=t},setWidth:function(t){this.el.style.width=t+"px"},setHeight:function(t){this.el.style.height=t+"px"},setPopInDuration:function(t){this.cardPopInDuration=t},transitionIn:function(t){var n=this;this.el.classList.add(t+"-start"),this.el.classList.add(t),this.el.style.display="block",setTimeout(function(){n.el.classList.remove(t+"-start")},100)},disableTransition:function(t){this.el.classList.remove(t)},swipeRight:function(){return this.transitionOut("right")},swipeLeft:function(){return this.transitionOut("left")},swipe:function(t){return this.transitionOut(t)},snapBack:function(){this.onSnapBack(this.x,this.y,this.rotationAngle)},isUnderThreshold:function(){return Math.abs(this.thresholdAmount)<.4},transitionOut:function(n){var i=this,e="object"==typeof n,r=e?this.x>0:"right"===n;if(e&&this.isUnderThreshold())return void i.onSnapBack(this.x,this.y,this.rotationAngle);i.onTransitionOut(e?i.thresholdAmount:r?.5:-.5);var s,o,a,c,l;o=r?this.parentWidth/2+this.width:-(this.parentWidth+this.width),e?(s=Math.atan(n.gesture.deltaX/n.gesture.deltaY),a=o/Math.tan(s),c=n.gesture.velocityX,l=this.rotationAngle):(s=-1.5,a=100,c=.5,l=-.2);var u=.3-Math.min(Math.max(Math.abs(c)/10,.05),.2);t.requestAnimationFrame(function(){i.el.style.transform=i.el.style.webkitTransform="translate3d("+o+"px, "+a+"px,0) rotate("+l+"rad)",i.el.style.transition=i.el.style.webkitTransition="all "+u+"s ease-in-out"});var h=this.$q.defer();return setTimeout(function(){i.destroyed=!0,i.onDestroy&&i.onDestroy(),h.resolve()},1e3*u),h.promise},bindEvents:function(){var n=this;t.onGesture("dragstart",function(i){t.requestAnimationFrame(function(){n._doDragStart(i)})},this.el),t.onGesture("drag",function(i){t.requestAnimationFrame(function(){n._doDrag(i)}),i.gesture.srcEvent.preventDefault()},this.el),t.onGesture("dragend",function(i){t.requestAnimationFrame(function(){n._doDragEnd(i)})},this.el)},_transformOriginLeft:function(){this.el.style[u]="left center",this.rotationDirection=1},_transformOriginRight:function(){this.el.style[u]="right center",this.rotationDirection=-1},_doDragStart:function(t){t.preventDefault();var n=this.el.offsetWidth,i=window.innerWidth/2+this.rotationDirection*(n/2),e=Math.abs(i-t.gesture.touches[0].pageX);this.touchDistance=10*e},_doDrag:function(t){t.preventDefault();var n=t.gesture.deltaX/-1e3;this.rotationAngle=Math.atan(n),this.x=this.startX+.8*t.gesture.deltaX,this.y=this.startY+.8*t.gesture.deltaY,this.el.style.transform=this.el.style.webkitTransform="translate3d("+this.x+"px, "+this.y+"px, 0) rotate("+(this.rotationAngle||0)+"rad)",this.thresholdAmount=this.x/(this.parentWidth/2);var i=this;setTimeout(function(){i.onPartialSwipe(i.thresholdAmount)})},_doDragEnd:function(t){this.transitionOut(t)}});angular.module("ionTinderCards",["ionic"]).directive("tdCard",n).directive("tdCards",i).directive("tdPulse",e).directive("tdControls",r).directive("tdControlButton",s).factory("TDCardDelegate",o),n.$inject=["$timeout","$q"],i.$inject=["$rootScope","$timeout"],o.$inject=["$rootScope"]}(window.ionic);